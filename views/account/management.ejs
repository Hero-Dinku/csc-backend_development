<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../layouts/head', { title: title }) %>
    <style>
        .management-main {
            padding: 50px 0;
            background-color: #f8f9fa;
            min-height: calc(100vh - 200px);
        }
        .account-info {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        .inventory-section {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-top: 2rem;
        }
    </style>
</head>
<body>
    <%- include('../partials/header') %>
    
    <main class="management-main">
        <div class="container">
            <h1><%= title %></h1>
            
            <!-- Display flash messages -->
            <% if (messages.notice) { %>
                <div class="alert alert-info">
                    <%= messages.notice %>
                </div>
            <% } %>
            
            <% if (messages.success) { %>
                <div class="alert alert-success">
                    <%= messages.success %>
                </div>
            <% } %>
            
            <% if (messages.error) { %>
                <div class="alert alert-danger">
                    <%= messages.error %>
                </div>
            <% } %>

            <!-- Task 3: Greeting based on account type -->
            <% if (account) { %>
                <%# Show h2 greeting for all account types %>
                <h2>Welcome <%= account.account_firstname %></h2>
                
                <!-- Account information display -->
                <div class="account-info">
                    <h3>Account Information</h3>
                    <p><strong>Name:</strong> <%= account.account_firstname %> <%= account.account_lastname %></p>
                    <p><strong>Email:</strong> <%= account.account_email %></p>
                    <p><strong>Account Type:</strong> 
                        <span class="badge 
                            <% if (account.account_type === 'Admin') { %>bg-danger<% } %>
                            <% if (account.account_type === 'Employee') { %>bg-warning<% } %>
                            <% if (account.account_type === 'Client') { %>bg-primary<% } %>
                        ">
                            <%= account.account_type %>
                        </span>
                    </p>
                </div>

                <!-- Update account link - shown for all users -->
                <div class="update-section mb-4">
                    <a href="/account/update" class="btn btn-primary btn-lg">Update Account Information</a>
                </div>

                <!-- Task 3: Inventory management section ONLY for Employees/Admins -->
                <% if (account.account_type === 'Employee' || account.account_type === 'Admin') { %>
                    <div class="inventory-section">
                        <h3>Inventory Management</h3>
                        <p class="text-muted">As an <%= account.account_type %>, you have access to inventory management features.</p>
                        <a href="/inv" class="btn btn-secondary">Manage Inventory</a>
                    </div>
                <% } else { %>
                    <!-- Task 3: No h3 element for Client users (not visible in source) -->
                <% } %>
            <% } else { %>
                <div class="alert alert-warning">
                    <p>No account information found. Please log in.</p>
                    <a href="/account/login" class="btn btn-primary">Login</a>
                </div>
            <% } %>
        </div>
    </main>
    
    <%- include('../partials/footer') %>
</body>
</html>
